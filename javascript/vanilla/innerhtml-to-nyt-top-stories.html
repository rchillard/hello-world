
<!DOCTYPE html>
<html>
<head>
	<title>What to read today</title>

	<style type="text/css">
		body {
			margin: 1em auto;
			max-width: 40em;
			width: 88%;
		}
	</style>
</head>
<body>

	<h1>What to read today</h1>

	<div id="app"></div>

	<script>
        // This is a secret
        var API_KEY = "";
        var API_URL = "https://api.nytimes.com/svc/mostpopular/v2/emailed/7.json?api-key=" + API_KEY;

        var app = document.querySelector('#app');

        fetch(API_URL).then(function(response) {
            // response received from API
            if(response.ok) {
                // error code == 200
                return response.json();
            } else {
                // error code != 200
                return Promise.reject(response);
            }
        }).then(function(data) {
            // data is JSON, so do work
            console.log(data);
            data.results.forEach(function(result) {
                app.innerHTML = app.innerHTML + "<h2><a href=''" + result["url"] + "'>" + result["title"] + "</a></h2>" + "<p>" + result["abstract"] + "</p>"
            })
        }).catch(function(err) {
            // log out error
            console.warn(err.json());
        })
	</script>
</body>
</html>